version: "3.1"
rules:
- rule: Rispondi al comando /start
  steps:
  - intent: start
  - action: utter_start

- rule: Rispondi al comando /help
  steps:
  - intent: help
  - action: utter_help

- rule: Attiva il form per il meteo
  steps:
    - intent: chiedi_meteo
    - action: weather_form
    - active_loop: weather_form

- rule: Attiva form anche con dammi_meteo
  steps:
    - intent: dammi_meteo
    - action: weather_form
    - active_loop: weather_form

- rule: Esegui form weather e chiudi il loop
  condition:
    - active_loop: weather_form
  steps:
    - action: weather_form
    - active_loop: null
    - action: utter_submit_weather_form
    - action: action_get_weather

- rule: Consiglio abbigliamento
  steps:
  - intent: ask_clothing_advice
  - action: action_clothing_advice

- rule: Consiglio attività all’aperto
  steps:
  - intent: ask_activity_advice
  - action: action_activity_advice

- rule: Fornisci qualità dell'aria
  steps:
  - intent: ask_air_quality 
  - action: action_get_air_quality

- rule: Fornisci orari alba/tramonto
  steps:
    - intent: ask_sun_times
    - action: action_get_sun_times

- rule: Fornisci attrazioni città
  steps:
    - intent: ask_city_overview
    - action: action_get_attractions
